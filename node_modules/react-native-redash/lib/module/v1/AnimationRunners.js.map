{"version":3,"sources":["AnimationRunners.ts"],"names":["Animated","add","Clock","Value","block","cond","stopClock","set","startClock","clockRunning","not","and","reTiming","timing","reDecay","decay","reSpring","spring","SpringUtils","defaultSpringConfig","makeDefaultConfig","animate","fn","clock","state","config","from","finished","time","position","params","duration","to","easing","v","frameTime","toValue","velocity","deceleration","springConfig","delay","node","loop","loopConfig","boomerang","autoStart"],"mappings":"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","sourcesContent":["import Animated, { add } from \"react-native-reanimated\";\n\nimport { SpringConfig } from \"./Animations\";\n\nconst {\n  Clock,\n  Value,\n  block,\n  cond,\n  stopClock,\n  set,\n  startClock,\n  clockRunning,\n  not,\n  and,\n  timing: reTiming,\n  decay: reDecay,\n  spring: reSpring,\n  SpringUtils,\n} = Animated;\n\nconst defaultSpringConfig = SpringUtils.makeDefaultConfig();\n\ninterface AnimateParams<S, C> {\n  clock: Animated.Clock;\n  fn: (\n    clock: Animated.Clock,\n    state: S,\n    config: C\n  ) => Animated.Adaptable<number>;\n  state: S;\n  config: C;\n  from: Animated.Adaptable<number>;\n}\n\ninterface TimingAnimation {\n  state: Animated.TimingState;\n  config: Animated.TimingConfig;\n}\n\ninterface SpringAnimation {\n  state: Animated.SpringState;\n  config: Animated.SpringConfig;\n}\n\ninterface DecayAnimation {\n  state: Animated.DecayState;\n  config: Animated.DecayConfig;\n}\n\ntype Animation = SpringAnimation | DecayAnimation | TimingAnimation;\n\nconst animate = <T extends Animation>({\n  fn,\n  clock,\n  state,\n  config,\n  from,\n}: AnimateParams<T[\"state\"], T[\"config\"]>) =>\n  block([\n    cond(not(clockRunning(clock)), [\n      set(state.finished, 0),\n      set(state.time, 0),\n      set(state.position, from),\n      startClock(clock),\n    ]),\n    fn(clock, state, config),\n    cond(state.finished, stopClock(clock)),\n    state.position,\n  ]);\n\nexport interface TimingParams {\n  clock?: Animated.Clock;\n  from?: Animated.Adaptable<number>;\n  to?: Animated.Adaptable<number>;\n  duration?: Animated.Adaptable<number>;\n  easing?: (v: Animated.Adaptable<number>) => Animated.Node<number>;\n}\n\nexport const timing = (params: TimingParams) => {\n  const { clock, easing, duration, from, to } = {\n    clock: new Clock(),\n    duration: 250,\n    from: 0,\n    to: 1,\n    easing: (v: Animated.Adaptable<number>) => add(v, 0),\n    ...params,\n  };\n\n  const state: Animated.TimingState = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    frameTime: new Value(0),\n  };\n\n  const config = {\n    toValue: new Value(0),\n    duration,\n    easing,\n  };\n\n  return block([\n    cond(not(clockRunning(clock)), [\n      set(config.toValue, to),\n      set(state.frameTime, 0),\n    ]),\n    animate<TimingAnimation>({\n      clock,\n      fn: reTiming,\n      state,\n      config,\n      from,\n    }),\n  ]);\n};\n\nexport interface DecayParams {\n  clock?: Animated.Clock;\n  from?: Animated.Adaptable<number>;\n  velocity?: Animated.Adaptable<number>;\n  deceleration?: Animated.Adaptable<number>;\n}\n\nexport const decay = (params: DecayParams) => {\n  const { clock, from, velocity, deceleration } = {\n    clock: new Clock(),\n    velocity: new Value(0),\n    deceleration: 0.998,\n    from: 0,\n    ...params,\n  };\n\n  const state: Animated.DecayState = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    velocity: new Value(0),\n  };\n\n  const config: Animated.DecayConfig = {\n    deceleration,\n  };\n\n  return block([\n    cond(not(clockRunning(clock)), [set(state.velocity, velocity)]),\n    animate<DecayAnimation>({\n      clock,\n      fn: reDecay,\n      state,\n      config,\n      from,\n    }),\n  ] as ReadonlyArray<Animated.Node<number>>);\n};\n\nexport interface SpringParams {\n  clock?: Animated.Clock;\n  from?: Animated.Adaptable<number>;\n  to: Animated.Adaptable<number>;\n  velocity?: Animated.Adaptable<number>;\n  config?: SpringConfig;\n}\n\nexport const spring = (params: SpringParams) => {\n  const { clock, from, velocity, config: springConfig, to } = {\n    clock: new Clock(),\n    velocity: new Value(0),\n    from: 0,\n    ...params,\n  };\n\n  const state: Animated.SpringState = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    velocity: new Value(0),\n  };\n\n  const config = {\n    ...defaultSpringConfig,\n    toValue: new Value(0),\n    ...springConfig,\n  };\n\n  return block([\n    cond(not(clockRunning(clock)), [\n      set(config.toValue, to),\n      set(state.velocity, velocity),\n    ]),\n    animate<SpringAnimation>({\n      clock,\n      fn: reSpring,\n      state,\n      config,\n      from,\n    }),\n  ] as ReadonlyArray<Animated.Node<number>>);\n};\n\nexport const delay = (node: Animated.Node<number>, duration: number) => {\n  const clock = new Clock();\n  return block([\n    timing({ clock, from: 0, to: 1, duration }),\n    cond(not(clockRunning(clock)), node),\n  ]);\n};\n\nexport interface LoopProps {\n  clock?: Animated.Clock;\n  easing?: (v: Animated.Adaptable<number>) => Animated.Node<number>;\n  duration?: number;\n  boomerang?: boolean;\n  autoStart?: boolean;\n}\n\nexport const loop = (loopConfig: LoopProps) => {\n  const { clock, easing, duration, boomerang, autoStart } = {\n    clock: new Clock(),\n    duration: 250,\n    boomerang: false,\n    autoStart: true,\n    easing: (v: Animated.Adaptable<number>) => add(v, 0),\n    ...loopConfig,\n  };\n  const state = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    frameTime: new Value(0),\n  };\n  const config = {\n    toValue: new Value(1),\n    duration,\n    easing,\n  };\n\n  return block([\n    cond(and(not(clockRunning(clock)), autoStart ? 1 : 0), startClock(clock)),\n    reTiming(clock, state, config),\n    cond(state.finished, [\n      set(state.finished, 0),\n      set(state.time, 0),\n      set(state.frameTime, 0),\n      boomerang\n        ? set(config.toValue, cond(config.toValue, 0, 1))\n        : set(state.position, 0),\n    ]),\n    state.position,\n  ]);\n};\n"]}