{"version":3,"sources":["Transitions.ts"],"names":["useEffect","Animated","not","add","useConst","Value","cond","block","set","Clock","spring","startClock","stopClock","timing","neq","SpringUtils","defaultSpringConfig","makeDefaultConfig","withTransition","value","timingConfig","init","clock","state","finished","frameTime","position","time","config","toValue","duration","easing","v","withSpringTransition","springConfig","velocity","damping","mass","stiffness","overshootClamping","restSpeedThreshold","restDisplacementThreshold","withTimingTransition","useTransition","setValue","transition","useSpringTransition","useTimingTransition"],"mappings":"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","sourcesContent":["/* eslint-disable no-nested-ternary */\nimport { useEffect } from \"react\";\nimport Animated, { not, add } from \"react-native-reanimated\";\n\nimport { SpringConfig, TimingConfig } from \"./Animations\";\nimport { useConst } from \"./Hooks\";\n\nconst {\n  Value,\n  cond,\n  block,\n  set,\n  Clock,\n  spring,\n  startClock,\n  stopClock,\n  timing,\n  neq,\n  SpringUtils,\n} = Animated;\n\nconst defaultSpringConfig = SpringUtils.makeDefaultConfig();\n\nexport const withTransition = (\n  value: Animated.Node<number>,\n  timingConfig: TimingConfig = {}\n) => {\n  const init = new Value(0);\n  const clock = new Clock();\n  const state = {\n    finished: new Value(0),\n    frameTime: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n  };\n  const config = {\n    toValue: new Value(0),\n    duration: 150,\n    easing: (v: Animated.Adaptable<number>) => add(v, 0),\n    ...timingConfig,\n  };\n  return block([\n    cond(not(init), [set(init, 1), set(state.position, value)]),\n    cond(neq(config.toValue, value), [\n      set(state.frameTime, 0),\n      set(state.time, 0),\n      set(state.finished, 0),\n      set(config.toValue, value),\n      startClock(clock),\n    ]),\n    timing(clock, state, config),\n    cond(state.finished, stopClock(clock)),\n    state.position,\n  ]);\n};\n\nexport const withSpringTransition = (\n  value: Animated.Node<number>,\n  springConfig: SpringConfig = defaultSpringConfig,\n  velocity: Animated.Adaptable<number> = 0\n) => {\n  const init = new Value(0);\n  const clock = new Clock();\n  const state = {\n    finished: new Value(0),\n    velocity: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n  };\n  const config = {\n    toValue: new Value(0),\n    damping: 15,\n    mass: 1,\n    stiffness: 150,\n    overshootClamping: false,\n    restSpeedThreshold: 1,\n    restDisplacementThreshold: 1,\n    ...springConfig,\n  };\n  return block([\n    cond(not(init), [set(init, 1), set(state.position, value)]),\n    cond(neq(config.toValue, value), [\n      set(state.velocity, velocity),\n      set(state.time, 0),\n      set(state.finished, 0),\n      set(config.toValue, value),\n      startClock(clock),\n    ]),\n    spring(clock, state, config),\n    cond(state.finished, stopClock(clock)),\n    state.position,\n  ]);\n};\n\nexport const withTimingTransition = withTransition;\n\nexport const useTransition = (\n  state: boolean | number,\n  config: TimingConfig = {}\n) => {\n  const value: Animated.Value<number> = useConst(() => new Value(0));\n  useEffect(() => {\n    value.setValue(typeof state === \"boolean\" ? (state ? 1 : 0) : state);\n  }, [value, state]);\n  const transition = useConst(() => withTransition(value, config));\n  return transition;\n};\n\nexport const useSpringTransition = (\n  state: boolean | number,\n  config: SpringConfig = defaultSpringConfig\n) => {\n  const value: Animated.Value<number> = useConst(() => new Value(0));\n\n  useEffect(() => {\n    value.setValue(typeof state === \"boolean\" ? (state ? 1 : 0) : state);\n  }, [value, state]);\n\n  const transition = useConst(() => withSpringTransition(value, config));\n  return transition;\n};\n\nexport const useTimingTransition = useTransition;\n"]}